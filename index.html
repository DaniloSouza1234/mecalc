<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mecalc – Pneumática</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="top">
  <div class="wrap">
    <h1>Mecalc</h1>

    <nav class="main-nav">
      <a href="home.html">Home</a>
      <a href="index.html" class="active">Pneumática</a>
      <a href="transportadores.html">Transportadores</a>
      <a href="normas.html">Normas</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <!-- ===================== TABELA DE FORÇA ===================== -->
  <section class="card">
    <h2>Tabela de força de cilindros (kgf)</h2>

    <p class="para">
      Selecione o diâmetro (Ø) e a pressão para destacar a célula na tabela.
      Valores em <b>kgf</b> para avanço e retorno, de <b>2 até 10 bar</b>.
    </p>

    <div class="controls">
      <label>
        Ø do cilindro (mm)
        <select id="boreSelect"></select>
      </label>

      <label>
        Pressão (bar)
        <select id="pressureSelect"></select>
      </label>

      <label>
        Buscar Ø (mm)
        <input id="boreSearch" type="number" placeholder="ex: 32" />
      </label>

      <button type="button" id="clearSelection">Limpar seleção</button>
    </div>

    <div class="para tiny-note" style="margin-top:8px;">
      Interpolação linear aproximada:
      3 bar → entre 2 e 4 | 5 bar → entre 4 e 6 | 7 bar → entre 6 e 8 | 9 bar → entre 8 e 10.
    </div>

    <div style="overflow-x:auto; margin-top:12px;">
      <table id="forceTable"></table>
    </div>

    <div class="para tiny-note" style="margin-top:8px;">
      <b>Rosca:</b> valor típico (pode variar por série/fabricante).
    </div>
  </section>

  <!-- ===================== TORQUE NA ALAVANCA ===================== -->
  <section class="card torque-card">
    <h2>Cálculo de torque na alavanca</h2>

    <p class="para">
      Torque na alavanca: <b>T = F · L · sen(θ)</b>, onde <b>θ</b> é o ângulo entre o cilindro e a alavanca.
    </p>

    <div class="torque-grid">
      <label>
        Força da tabela
        <select id="forceType">
          <option value="ext">Avanço</option>
          <option value="ret">Retorno</option>
        </select>
      </label>

      <button type="button" id="useTableForce">Usar força da tabela</button>

      <label>
        Força no cilindro (kgf)
        <input type="number" id="cylinderForce" placeholder="ex: 50" step="0.1" />
      </label>

      <label>
        Comprimento da alavanca (mm)
        <input type="number" id="leverLength" placeholder="ex: 46.5" step="0.1" />
      </label>

      <label>
        Ângulo inicial θ (°)
        <input type="number" id="angleStart" placeholder="ex: 45" step="0.1" />
      </label>

      <label>
        Ângulo final θ (°)
        <input type="number" id="angleEnd" placeholder="ex: 90" step="0.1" />
      </label>

      <button type="button" id="calcTorque">Calcular torque + gráfico</button>
    </div>

    <!-- Diagrama (SVG externo) -->
    
      <img
        src="./assets/img/diagrama-angulo-cilindro-alavanca-theta0-theta1.svg"
        alt="Diagrama 2D: cilindro e alavanca com ângulo θ"
        class="angle-diagram-img"
      />

     </div>

    <div id="torqueResult" class="result"></div>

    <div class="chart-box">
      <canvas id="forceChart"></canvas>
    </div>
  </section>

  <!-- ===================== DIMENSIONAR CILINDRO ===================== -->
  <section class="card">
    <h2>Dimensionar cilindro pelo torque desejado</h2>

    <p class="para" style="margin-bottom:6px;">
      Utilize o <b>mesmo braço (mm)</b> e os <b>ângulos</b> do card acima.
      O dimensionamento usa o pior ponto (menor sen(θ)) dentro do intervalo.
    </p>

    <div class="controls">
      <label>
        Torque desejado
        <input type="number" id="desiredTorque" placeholder="ex: 10" step="0.01" />
      </label>

      <label>
        Unidade
        <select id="torqueUnit">
          <option value="kgfm">kgf·m</option>
          <option value="Nm">N·m</option>
        </select>
      </label>

      <button type="button" id="calcCylinder">Dimensionar cilindro</button>
    </div>

    <div id="cylinderResult" class="result"></div>
  </section>

  <!-- ===================== CONSUMO PNEUMÁTICO ===================== -->
  <section class="card">
    <h2>Consumo pneumático (NL/min)</h2>

    <p class="para" style="margin-bottom:8px;">
      Cadastre os cilindros da máquina (dupla ação). O resultado é em <b>NL/min</b> (ar livre).
      A haste é opcional: se não informar, o retorno será calculado sem descontar a área da haste (resultado conservador).
    </p>

    <div class="torque-grid" style="align-items:flex-end;">
      <label>
        Pressão padrão (bar)
        <input type="number" id="airPressureDefault" value="6" step="0.1" />
      </label>

      <label>
        Fator de perdas
        <input type="number" id="airLossFactor" value="1.15" step="0.01" min="1" />
      </label>

      <label>
        Margem para compressor
        <input type="number" id="airCompressorMargin" value="1.20" step="0.01" min="1" />
      </label>
    </div>

    <div class="para tiny-note" style="margin-top:6px;">
      O fator de perdas considera perdas típicas por válvulas, mangueiras e vazamentos.
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
      <button type="button" id="airAddRow">+ Adicionar cilindro</button>
      <button type="button" id="airCalc">Calcular consumo</button>
      <button type="button" id="airClearRows">Limpar lista</button>
    </div>

    <div style="overflow-x:auto; margin-top:12px;">
      <table id="airTable"></table>
    </div>

    <div id="airResult" class="result" style="margin-top:12px;"></div>
  </section>

</main>

<footer class="wrap" style="margin:30px 0; text-align:center; font-size:12px;">
  © 2025 Mecalc — Ferramentas para Engenharia Mecânica
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="app.js"></script>
</body>
</html>


