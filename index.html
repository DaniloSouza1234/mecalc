<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mecalc – Cálculo de Força de Cilindros Pneumáticos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

<header class="top">
  <div class="wrap">
    <h1>Mecalc</h1>

    <nav class="main-nav">
      <a href="home.html">Home</a>
      <a href="index.html" class="active">Pneumática</a>
      <a href="transportadores.html">Transportadores</a>
      <a href="normas.html">Normas</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <!-- CARD: Tabela de forças -->
  <section class="card">
    <h2>Tabela de força de cilindros (kgf)</h2>

    <p class="para">
      Selecione a pressão e um diâmetro (Ø) para destacar avanço/retorno na tabela.
    </p>

    <div class="controls">
      <label>
        Pressão (bar)
        <select id="pressure">
          <option value="2">2 bar</option>
          <option value="3">3 bar</option>
          <option value="4">4 bar</option>
          <option value="5">5 bar</option>
          <option value="6" selected>6 bar</option>
          <option value="7">7 bar</option>
          <option value="8">8 bar</option>
          <option value="9">9 bar</option>
          <option value="10">10 bar</option>
        </select>
      </label>

      <label>
        Buscar Ø na tabela
        <input type="number" id="search" placeholder="ex: 32" />
      </label>

      <button type="button" id="clear">Limpar seleção</button>
    </div>

    <div class="para" style="font-size:12px; color:var(--muted); margin-top:8px;">
      Interpolação linear aproximada:<br>
      3 bar → entre 2 e 4 &nbsp;&nbsp;|&nbsp;&nbsp;
      5 bar → entre 4 e 6 &nbsp;&nbsp;|&nbsp;&nbsp;
      7 bar → entre 6 e 8 &nbsp;&nbsp;|&nbsp;&nbsp;
      9 bar → entre 8 e 10.
    </div>

    <div style="overflow-x:auto; margin-top:12px;">
      <table id="forceTable"></table>
    </div>
  </section>

  <!-- CARD: Cálculo de torque na alavanca -->
  <section class="card torque-card">
    <h2>Cálculo de torque na alavanca</h2>

    <div class="torque-grid">
      <label>
        Ø do cilindro (mm)
        <input type="number" id="cylDia" placeholder="ex: 32" />
      </label>

      <label>
        Pressão (bar)
        <input type="number" id="cylPressure" placeholder="ex: 6" value="6" />
      </label>

      <label>
        Braço da alavanca (mm)
        <input type="number" id="leverArm" placeholder="ex: 46.5" />
      </label>

      <label>
        Ângulo inicial θ (°)
        <input type="number" id="angleStart" placeholder="ex: 45" value="45" />
      </label>

      <label>
        Ângulo final θ (°)
        <input type="number" id="angleEnd" placeholder="ex: 90" value="90" />
      </label>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
      <button type="button" id="calcTorque">Calcular torque</button>
    </div>

    <div id="torqueResult" class="result"></div>

    <div style="margin-top:16px; height:260px;">
      <canvas id="forceChart"></canvas>
    </div>
  </section>

  <!-- CARD: Dimensionar cilindro pelo torque desejado -->
  <section class="card">
    <h2>Dimensionar cilindro pelo torque desejado</h2>

    <p class="para" style="margin-bottom:6px;">
      Utilize o <b>mesmo braço (mm)</b> e os <b>mesmos ângulos inicial/final</b> definidos acima.
      Informe o torque mínimo que você precisa no pior ponto do movimento.
    </p>

    <div class="torque-grid">
      <label>
        Torque desejado (mínimo no intervalo)
        <input type="number" id="desiredTorque" placeholder="ex: 15" step="0.01" />
      </label>

      <label>
        Unidade do torque desejado
        <select id="desiredTorqueUnit">
          <option value="kgfm">kgf·m</option>
          <option value="Nm">N·m</option>
        </select>
      </label>

      <label>
        Pressão (bar) para dimensionamento
        <input type="number" id="desiredPressure" placeholder="ex: 6" value="6" step="0.1" />
      </label>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
      <button type="button" id="calcCylinder">Dimensionar cilindro</button>
    </div>

    <div id="cylinderResult" class="result"></div>

    <div class="para" style="font-size:12px; color:var(--muted); margin-top:10px; line-height:1.5;">
      Observação: o cálculo considera o pior ângulo do intervalo informado. Para cargas variáveis, considere utilizar
      fator de segurança e/ou travamento (válvula de retenção) conforme a aplicação.
    </div>
  </section>

  <!-- CARD: Consumo pneumático -->
  <section class="card">
    <h2>Consumo pneumático (NL/min)</h2>

    <p class="para" style="margin-bottom:8px;">
      Cadastre os cilindros da máquina (dupla ação). O sistema calcula o consumo em <b>ar livre (NL/min)</b>.
      A haste é opcional: se não informar, o retorno será calculado sem descontar a área da haste (resultado conservador).
    </p>

    <div class="torque-grid">
      <label>
        Pressão padrão (bar)
        <input type="number" id="airPressureDefault" value="6" step="0.1" />
        <div style="font-size:12px;color:var(--muted);margin-top:6px;">
          Pressão manométrica (ex.: 6 bar). O cálculo usa Pabs = Pg + 1.
        </div>
      </label>

      <label>
        Fator de perdas
        <input type="number" id="airLossFactor" value="1.15" step="0.01" min="1" />
        <div style="font-size:12px;color:var(--muted);margin-top:6px;">
          Inclui perdas típicas por <b>válvulas</b>, <b>mangueiras</b> e <b>vazamentos</b>. (Sugestão: 1,10 a 1,30)
        </div>
      </label>

      <label>
        Margem para compressor
        <input type="number" id="airCompressorMargin" value="1.20" step="0.01" min="1" />
        <div style="font-size:12px;color:var(--muted);margin-top:6px;">
          Margem adicional para dimensionamento do compressor (ex.: +20%).
        </div>
      </label>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
      <button type="button" id="airAddRow">+ Adicionar cilindro</button>
      <button type="button" id="airCalc">Calcular consumo</button>
      <button type="button" id="airClearRows">Limpar lista</button>
    </div>

    <div style="overflow-x:auto; margin-top:12px;">
      <table id="airTable"></table>
    </div>

    <div id="airResult" class="result" style="margin-top:12px;"></div>

    <div class="para" style="font-size:12px; color:var(--muted); margin-top:10px; line-height:1.5;">
      Fórmula base (ar livre):<br>
      <b>NL/ciclo</b> ≈ (V<sub>avanço</sub> + V<sub>retorno</sub>) · (P<sub>g</sub> + 1).<br>
      Depois: <b>NL/min</b> = NL/ciclo · ciclos/min · fator de perdas.
    </div>
  </section>

</main>

<footer class="wrap" style="margin:30px 0; text-align:center; font-size:12px;">
  © 2025 Mecalc — Ferramentas para Engenharia Mecânica
</footer>

<!-- Chart.js para o gráfico de torque x ângulo -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Lógica da tabela, torque e dimensionamento -->
<script src="app.js"></script>
</body>
</html>
