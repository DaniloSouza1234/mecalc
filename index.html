<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mecalc — Pneumática</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header class="top">
  <div class="wrap">
    <h1>Mecalc</h1>
    <nav class="main-nav">
      <a href="home.html">Home</a>
      <a href="index.html" class="active">Pneumática</a>
      <a href="transportadores.html">Transportadores</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <!-- TABELA -->
  <section class="card">
    <h2>Tabela de força do cilindro pneumático</h2>
    <p class="para" style="margin-top:4px;">
      Valores em <b>kgf</b> (avanço e retorno), de <b>2 até 10 bar</b>.
    </p>

    <div class="torque-grid" style="margin-top:10px; align-items:flex-end;">
      <label>
        Ø do cilindro (mm)
        <select id="boreSelect"></select>
      </label>

      <label>
        Pressão (bar)
        <select id="pressure">
          <option value="">—</option>
          <option value="2">2 bar</option>
          <option value="3">3 bar (interpolar 2–4)</option>
          <option value="4">4 bar</option>
          <option value="5">5 bar (interpolar 4–6)</option>
          <option value="6">6 bar</option>
          <option value="7">7 bar (interpolar 6–8)</option>
          <option value="8">8 bar</option>
          <option value="9">9 bar (interpolar 8–10)</option>
          <option value="10">10 bar</option>
        </select>
      </label>

      <label>
        Buscar Ø na tabela
        <input type="number" id="search" placeholder="ex: 32" />
      </label>

      <button type="button" id="clear">Limpar seleção</button>
    </div>

    <div class="para" style="font-size:12px; color:var(--muted); margin-top:8px;">
      Interpolação linear aproximada:<br>
      3 bar → entre 2 e 4 &nbsp;|&nbsp;
      5 bar → entre 4 e 6 &nbsp;|&nbsp;
      7 bar → entre 6 e 8 &nbsp;|&nbsp;
      9 bar → entre 8 e 10.
    </div>

    <div style="overflow-x:auto; margin-top:12px;">
      <table id="forceTable"></table>
    </div>
  </section>

  <!-- TORQUE -->
  <section class="card torque-card">
    <h2>Cálculo de torque na alavanca</h2>

    <!-- BLOCO DO DIAGRAMA (SVG inline - NÃO depende de pasta img) -->
<div class="theta-help">
  <div class="theta-help-head">
    <div class="theta-title">Como medir θ</div>
    <div class="theta-sub">
      θ é o ângulo <b>entre a alavanca (pivô → pino)</b> e o <b>eixo do cilindro</b>,
      medido no <b>pino</b>. Use <b>θ₀</b> (inicial) e <b>θ₁</b> (final) para o gráfico.
    </div>
  </div>

  <div class="theta-diagram-wrap">
    <svg class="theta-diagram" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 360">
      <defs>
        <style>
          .s{fill:none;stroke:#d9d9d9;stroke-width:4;stroke-linecap:round;stroke-linejoin:round}
          .d{fill:none;stroke:#d9d9d9;stroke-width:3;stroke-dasharray:10 10;stroke-linecap:round}
          .txt{fill:#d9d9d9;font: 16px system-ui, -apple-system, Segoe UI, Arial}
          .red{stroke:#ff4b4b}
          .blue{stroke:#4aa3ff}
          .y{stroke:#ffd54a}
        </style>
      </defs>

      <!-- Pivô -->
      <circle cx="160" cy="70" r="22" fill="none" stroke="#d9d9d9" stroke-width="4"/>
      <circle cx="160" cy="70" r="6" fill="#d9d9d9"/>
      <text x="195" y="76" class="txt">Pivô</text>

      <!-- Alavanca -->
      <line x1="160" y1="70" x2="255" y2="285" class="s red"/>
      <text x="80" y="185" class="txt">Alavanca</text>

      <!-- Pino -->
      <circle cx="255" cy="285" r="7" fill="#d9d9d9"/>
      <text x="270" y="305" class="txt">Pino</text>

      <!-- Cilindro posição inicial (θ0) -->
      <line x1="255" y1="285" x2="800" y2="235" class="d blue"/>
      <text x="810" y="240" class="txt">Cilindro (θ₀)</text>

      <!-- Cilindro posição final (θ1) -->
      <line x1="255" y1="285" x2="780" y2="120" class="s blue"/>
      <text x="810" y="125" class="txt">Cilindro (θ₁)</text>

      <!-- Guias -->
      <line x1="255" y1="285" x2="160" y2="70" class="d"/>
      <line x1="255" y1="285" x2="800" y2="235" class="d"/>
      <line x1="255" y1="285" x2="780" y2="120" class="d"/>

      <!-- θ0 (menor ângulo, correto) -->
      <path d="M 235 248 A 70 70 0 0 1 318 276" class="s y"/>
      <text x="325" y="265" class="txt">θ₀</text>

      <!-- θ1 (MESMO SENTIDO de θ0, corrigido) -->
      <path d="M 235 248 A 95 95 0 0 1 360 225" class="s y"/>
      <text x="365" y="230" class="txt">θ₁</text>

      <!-- Nota -->
      <text x="20" y="340" class="txt">
        Dica: evite θ próximo de 0° ou 180° (sin(θ) ≈ 0 → torque muito baixo).
      </text>
    </svg>
  </div>
</div>

    <div class="torque-grid" style="margin-top:12px;">
      <label>
        Tipo de força (tabela)
        <select id="forceKind">
          <option value="e">Avanço</option>
          <option value="r">Retorno</option>
        </select>
      </label>

      <button type="button" id="useTableForce">Usar força da tabela</button>

      <label>
        Força no cilindro (kgf)
        <input type="number" id="cylinderForce" placeholder="ex: 50" step="0.1" />
      </label>

      <label>
        Comprimento da alavanca (mm)
        <input type="number" id="leverLength" placeholder="ex: 40" step="0.1" />
      </label>

      <label>
        Ângulo inicial entre cilindro e alavanca (°)
        <input type="number" id="angleStart" placeholder="ex: 45" step="0.1" />
      </label>

      <label>
        Ângulo final entre cilindro e alavanca (°)
        <input type="number" id="angleEnd" placeholder="ex: 90" step="0.1" />
      </label>

      <button type="button" id="calculateTorque">Calcular torque e gráfico</button>
    </div>

    <div id="torqueResult" class="result"></div>

    <div style="margin-top:16px; height:260px;">
      <canvas id="forceChart"></canvas>
    </div>
  </section>

  <!-- DIMENSIONAMENTO -->
  <section class="card">
    <h2>Dimensionar cilindro pelo torque desejado</h2>

    <p class="para" style="margin-bottom:6px;">
      Utilize o <b>mesmo braço (mm)</b> e os <b>mesmos ângulos inicial/final</b> definidos acima.
      Informe o torque mínimo que você precisa no pior ponto do movimento.
    </p>

    <div class="torque-grid">
      <label>
        Torque desejado (mínimo no intervalo)
        <input type="number" id="desiredTorque" placeholder="ex: 15" step="0.01" />
      </label>

      <label>
        Unidade do torque desejado
        <select id="desiredTorqueUnit">
          <option value="kgfm">kgf·m</option>
          <option value="Nm">N·m</option>
        </select>
      </label>

      <button type="button" id="calcCylinder">Dimensionar cilindro</button>
    </div>

    <div id="cylinderResult" class="result"></div>

    <div class="para" style="font-size:12px; color:var(--muted); margin-top:10px;">
      Dica: para aplicações com impacto, alta ciclagem ou cargas variáveis, considere fator de segurança maior,
      cilindro com diâmetro superior e/ou válvulas de retenção pilotadas para evitar recuo da carga.
    </div>
  </section>

</main>

<footer class="wrap" style="margin:30px 0; text-align:center; font-size:12px;">
  © 2025 Mecalc — Ferramentas para Engenharia Mecânica
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="app.js"></script>
</body>
</html>

