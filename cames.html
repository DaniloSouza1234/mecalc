<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mecalc – Cames</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./styles.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    .two-col{display:grid;grid-template-columns:1.1fr .9fr;gap:14px}
    @media(max-width:1000px){.two-col{grid-template-columns:1fr}}
    canvas.chart{width:100%!important;height:220px!important}
    .mini{font-size:12px;color:var(--muted);line-height:1.5;margin-top:8px}
    .warnbox{margin-top:10px;padding:12px;border-radius:12px;border:1px solid rgba(255,160,74,.35);background:rgba(255,160,74,.06)}
    .okbox{margin-top:10px;padding:12px;border-radius:12px;border:1px solid rgba(74,255,160,.25);background:rgba(74,255,160,.05)}
    .profile{border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(0,0,0,.18);padding:10px;margin-top:10px}
    #profileCanvas{width:100%;height:auto;display:block}
    .hint{font-size:12px;color:var(--muted);line-height:1.45;margin-top:6px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);font-size:12px;font-weight:800;color:rgba(255,255,255,.92);margin-right:8px;margin-top:6px}
  </style>
</head>

<body>
<header class="top">
  <div class="wrap">
    <h1>Mecalc</h1>
    <nav class="main-nav">
      <a href="./home.html">Home</a>
      <a href="./index.html">Pneumática</a>
      <a href="./transportadores.html">Transportadores</a>
      <a href="./normas.html">Normas</a>
      <a href="./cames.html" class="active">Cames</a>
    </nav>
  </div>
</header>

<main class="wrap">

<section class="card">
  <h2>Cames – Ciclo completo 0–360°</h2>
  <p class="para">
    Gráficos de <b>s(θ)</b>, <b>v(θ)</b>, <b>a(θ)</b>, <b>jerk</b> e visualização do <b>perfil 2D</b> (came radial com seguidor de rolete).
  </p>

  <div class="two-col">

    <!-- Inputs -->
    <div>
      <div class="grid-4">
        <div class="field">
          <label>Lei de movimento</label>
          <select id="camLaw">
            <option value="harmonic">Harmônica</option>
            <option value="cycloidal">Cicloidal</option>
            <option value="poly345">Polinomial 3-4-5</option>
          </select>
          <div class="hint" id="lawHint"></div>
        </div>

        <div class="field">
          <label>Curso H (mm)</label>
          <input id="camH" type="number" step="0.1" placeholder="ex: 30">
        </div>

        <div class="field">
          <label>RPM do came</label>
          <input id="camRpm" type="number" step="0.1" placeholder="ex: 60">
        </div>

        <div class="field">
          <label>Dwell inicial δ1 (°)</label>
          <input id="camD1" type="number" step="0.1" placeholder="ex: 60">
        </div>

        <div class="field">
          <label>Subida β (°)</label>
          <input id="camRise" type="number" step="0.1" placeholder="ex: 90">
        </div>

        <div class="field">
          <label>Retorno β (°)</label>
          <input id="camReturn" type="number" step="0.1" placeholder="ex: 90">
        </div>

        <div class="field">
          <label>Raio base Rb (mm)</label>
          <input id="camRb" type="number" step="0.1" placeholder="ex: 35">
        </div>

        <div class="field">
          <label>Raio do rolete Rr (mm)</label>
          <input id="camRr" type="number" step="0.1" placeholder="ex: 8">
        </div>

        <div class="field">
          <label>Offset e (mm)</label>
          <input id="camOffset" type="number" step="0.1" value="0">
        </div>

        <div class="field">
          <label>Pontos do ciclo</label>
          <select id="camN">
            <option value="361" selected>361 (1°)</option>
            <option value="721">721 (0,5°)</option>
            <option value="1441">1441 (0,25°)</option>
          </select>
        </div>

        <div class="field">
          <label>Limite aceleração (mm/s²)</label>
          <select id="camAmaxLim">
            <option value="5000">5.000</option>
            <option value="10000" selected>10.000</option>
            <option value="20000">20.000</option>
          </select>
        </div>

        <div class="field">
          <label>Limite jerk (mm/s³)</label>
          <select id="camJmaxLim">
            <option value="100000">100.000</option>
            <option value="200000" selected>200.000</option>
            <option value="300000">300.000</option>
            <option value="400000">400.000</option>
          </select>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn primary" id="camCalcBtn">Gerar gráficos e perfil</button>
        <button class="btn" id="camClearBtn" type="button">Limpar</button>
      </div>

      <div id="camSummary" class="okbox" style="display:none"></div>
      <div id="camWarn" class="warnbox" style="display:none"></div>

      <div class="mini">
        <span class="pill">Jerk</span>
        <div>
          <b>Jerk</b> é a variação da aceleração no tempo (o “tranco”). Valores altos aumentam vibração, ruído e desgaste.
          Referências iniciais: ≤100.000 mm/s³ (suave), 100.000–300.000 (típico), >300.000 (agressivo).
        </div>
      </div>
    </div>

    <!-- Gráficos + Perfil -->
    <div>
      <canvas id="chartS" class="chart"></canvas>
      <canvas id="chartV" class="chart"></canvas>
      <canvas id="chartA" class="chart"></canvas>
      <canvas id="chartJ" class="chart"></canvas>

      <div class="profile">
        <div class="mini" style="margin:0 0 6px 0;">
          <b>Perfil 2D:</b> pitch curve (centro do rolete) + envelope (perfil real do came)
        </div>
        <canvas id="profileCanvas" width="520" height="520"></canvas>
      </div>
    </div>

  </div>
</section>

</main>

<script src="./cames.js"></script>
</body>
</html>
